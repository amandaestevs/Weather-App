(()=>{"use strict";const t="7dd96f5392e51d63d9951fd686de3478";function e(){const t=document.querySelector(".current-weather-info"),e=document.querySelector(".max");t.classList.add("day-mode"),e.classList.add("day-mode"),t.classList.remove("dark-mode"),e.classList.add("dark-mode")}function n(){const t=document.querySelector(".current-weather-info"),e=document.querySelector(".max");t.classList.add("dark-mode"),e.classList.add("dark-mode"),t.classList.remove("day-mode"),e.classList.remove("day-mode")}const o="7dd96f5392e51d63d9951fd686de3478";const i=document.getElementById("input-field"),r=document.getElementById("search-btn"),c=document.getElementById("unit-btn");function a(){m(i.value,d?"metric":"imperial")}window.addEventListener("load",(()=>{m("Sao Paulo","metric")})),window.addEventListener("keydown",(t=>{"Enter"===t.key&&a()})),r.addEventListener("click",a);let d=!0;function u(){m(document.querySelector(".city-name").textContent,d?"metric":"imperial")}async function m(i,r){if(""===i||1===i.length)return;!function(){const t=document.getElementById("loader"),e=document.querySelector(".loading-page");t.style.display="block",e.style.display="flex"}();const c=await async function(e,n){const o=await async function(e){const n=await fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${e}&appid=${t}`);if(!n.ok)throw Error(n.status);const o=await n.json();if(o[0])return{lat:o[0].lat,lon:o[0].lon}}(e);if(!o)return"not found";const i=o.lat,r=o.lon,c=await async function(e,n,o){const i=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${n}&appid=${t}&units=${o}`);if(!i.ok)throw Error(i.status);const r=await i.json(),c=r.main.temp,a=r.main.temp_max,d=r.main.temp_min,u=r.main.humidity,m=r.main.feels_like,l=r.timezone,s=r.sys.country,y=r.wind.speed;return{temp:c,maxTemp:a,minTemp:d,humidity:u,feelsLike:m,timezone:l,country:s,description:r.weather[0].description,main:r.weather[0].main,icon:r.weather[0].icon,wind:y}}(i,r,n);if(!c)return"not found";const a=function(t,e){const n="metric"===e?"°C":"°F",o="metric"===e?"km/h":"m/s",i=Math.round(t.temp).toString().concat(n),r=Math.round(t.maxTemp).toString().concat(n),c=Math.round(t.minTemp).toString().concat(n),a=Math.round(t.feelsLike).toString().concat(n),d=t.humidity.toString().concat("%"),u=t.timezone,m=t.country,l=function(t,e){let n;return"km/h"===e?(n=(3.6*t).toFixed(2),n.toString().concat(e)):"m/s"===e?t.toString().concat(e):void 0}(t.wind,o),s=t.description,y=t.icon;return{temp:i,maxTemp:r,minTemp:c,humidity:d,feelsLike:a,timezone:u,country:m,description:s,main:t.main,icon:y,wind:l}}(c,n);return a}(i,r);if("not found"===c)return alert(`${i} not found. Search must be in form of "city" or "city, country code".`),void l();const a=await async function(t,e){const n=await async function(t){const e=await fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${t}&appid=${o}`);if(!e.ok)throw Error(e.status);const n=await e.json(),i=n[0].lat,r=n[0].lon;if(void 0!==i&&void 0!==r)return{lat:i,lon:r}}(t),i=n.lat,r=n.lon,c=await async function(t,e,n){const i=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${t}&lon=${e}&appid=${o}&units=${n}`);if(!i.ok)throw Error(i.status);const r=await i.json();return[r.list[5],r.list[13],r.list[21],r.list[29],r.list[37]]}(i,r,e),a=function(t,e){const n="metric"===e?"°C":"°F";return t.map((t=>{const e=Math.round(t.main.temp).toString().concat(n),o=t.weather[0].icon,i=t.dt_txt;return{averageTemp:e,icon:o,dayName:(r=new Date(i).getDay(),0===r?"Sun":1===r?"Mon":2===r?"Tue":3===r?"Wed":4===r?"Thu":5===r?"Fri":6===r?"Sat":void 0)};var r}))}(c,e);return a}(i,r);!function(t,o){(function(t){const o=document.querySelector(".main-weather");"01d"!==t&&"02d"!==t||(o.style.backgroundImage="url(img/clear-day.jpg)",e()),"01n"!==t&&"02n"!==t||(o.style.backgroundImage="url(img/clear-night.jpg)",n()),"03d"!==t&&"04d"!==t||(o.style.backgroundImage="url(img/cloudy-day.jpg)",e()),"03n"!==t&&"04n"!==t||(o.style.backgroundImage="url(img/cloudy-night.jpg)",n()),"09d"!==t&&"10d"!==t&&"11d"!==t||(o.style.backgroundImage="url(img/rainy-day.jpg)",e()),"09n"!==t&&"10n"!==t&&"11n"!==t||(o.style.backgroundImage="url(img/rainy-night.jpg)",e()),"13d"!==t&&"13n"!==t||(o.style.backgroundImage="url(img/snow.jpg)",e()),"50d"!==t&&"50n"!==t||(o.style.backgroundImage="url(img/mist.jpg)",e())})(o.icon),function(t){const e=(new Date).getTime(),n=6e4*(new Date).getTimezoneOffset(),o=new Date(n+e+1e3*t).toDateString();document.querySelector(".time-info").textContent=o}(o.timezone);const i=function(t,e){let n=`${t}, ${e}`;return n.split(",").length>2?`${n.split(",")[0]},${n.split(",").pop()}`:n}(t,o.country),r=`http://openweathermap.org/img/wn/${o.icon}@2x.png`;document.querySelector(".city-name").textContent=i,document.querySelector(".icon").setAttribute("src",`${r}`),document.querySelector(".temp").textContent=o.temp,document.querySelector(".description").textContent=o.description,document.querySelector(".wind").querySelector(".value").textContent=o.wind,document.querySelector(".humidity").querySelector(".value").textContent=o.humidity,document.querySelector(".feels-like").querySelector(".value").textContent=o.feelsLike,document.querySelector(".wind").querySelector(".title").textContent="Wind",document.querySelector(".humidity").querySelector(".title").textContent="Humidity",document.querySelector(".feels-like").querySelector(".title").textContent="Feels Like",document.querySelector(".max").querySelector(".value").textContent=o.maxTemp,document.querySelector(".min").querySelector(".value").textContent=o.minTemp,document.querySelector(".max").querySelector(".title").textContent="Max",document.querySelector(".min").querySelector(".title").textContent="Min"}(i,c),function(t){const e=document.querySelector(".forecast-container");e.innerHTML="";const n=document.getElementById("template");t.forEach((t=>{const o=n.content.cloneNode(!0),i=`http://openweathermap.org/img/wn/${t.icon}@2x.png`;o.querySelector(".day-of-the-week").textContent=t.dayName,o.querySelector(".icon-of-the-day").setAttribute("src",`${i}`),o.querySelector(".average-temp").textContent=t.averageTemp,e.append(o)}))}(a),l()}function l(){const t=document.getElementById("loader"),e=document.querySelector(".loading-page");t.style.display="none",e.style.display="none"}c.addEventListener("click",(()=>"°C"===c.textContent?(d=!1,c.textContent="°F",void u()):"°F"===c.textContent?(d=!0,c.textContent="°C",void u()):void 0))})();